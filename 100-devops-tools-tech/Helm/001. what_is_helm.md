# What is Helm?

## Quick Start Guide

### What is Helm?

Helm is a package manager for Kubernetes. It helps you define, install, and upgrade complex Kubernetes applications using a concept called "Charts." Think of Helm as the apt or yum for Kubernetes.

### Key Concepts

- **Chart**: A collection of files that describe a related set of Kubernetes resources
- **Release**: An instance of a chart running in a Kubernetes cluster
- **Repository**: A place where charts can be collected and shared

### Why Use Helm?

- **Simplicity**: Complex applications with multiple components can be deployed with a single command
- **Reusability**: Share and reuse applications across teams and environments
- **Version Control**: Track changes to your application configurations
- **Rollback**: Easily rollback to previous versions of your application
- **Templating**: Use Go templates to customize deployments for different environments

### Prerequisites

- A running Kubernetes cluster (minikube, kind, GKE, EKS, AKS, etc.)
- kubectl installed and configured
- Basic understanding of Kubernetes concepts

### Installation

#### Linux (Ubuntu/Debian)

The following commands are based on the installation steps shown in the provided terminal image. We have updated them to use modern GPG key management (replacing the deprecated apt-key) to ensure they work correctly on current Linux distributions.

```bash
# 1. Download and import the Helm signing key (modernized method)
# This replaces the old 'apt-key add' command to avoid security warnings
curl https://baltocdn.com/helm/signing.asc | gpg --dearmor | sudo tee /usr/share/keyrings/helm.gpg > /dev/null

# 2. Add the Helm repository to your APT sources
# We specify the architecture and keyring path explicitly
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/helm.gpg] https://baltocdn.com/helm/stable/debian/ all main" | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list

# 3. Update your local package index
sudo apt-get update

# 4. Install Helm
sudo apt-get install helm
```

#### Linux (Snap)

As shown in the image, you can also install Helm quickly using Snap. Note that the --classic flag is required because Helm requires full system access to manage Kubernetes contexts.

```bash
sudo snap install helm --classic
```

#### macOS

```bash
brew install helm
```

#### Windows (using Chocolatey)

```powershell
choco install kubernetes-helm
```

#### Verify Installation

```bash
helm version
```

### Basic Commands

#### 1. Search for Charts

```bash
# Search for available charts
helm search repo nginx

# Search the official Helm repository
helm search hub wordpress
```

#### 2. Add a Repository

```bash
# Add the official Helm stable repository
helm repo add stable https://charts.helm.sh/stable

# Update repository information
helm repo update

# List all repositories
helm repo list
```

#### 3. Inspect a Chart

```bash
# View chart information
helm show chart stable/nginx

# View chart values (configuration options)
helm show values stable/nginx
```

#### 4. Install a Chart

```bash
# Basic installation
helm install my-nginx stable/nginx

# Install with custom configuration
helm install my-nginx stable/nginx --set service.type=NodePort

# Install from a custom values file
helm install my-nginx stable/nginx -f values.yaml
```

#### 5. List Releases

```bash
# List all releases
helm list

# List releases in all namespaces
helm list --all-namespaces
```

#### 6. Check Release Status

```bash
helm status my-nginx
```

#### 7. Upgrade a Release

```bash
# Upgrade with new values
helm upgrade my-nginx stable/nginx --set image.tag=1.21

# Upgrade using a values file
helm upgrade my-nginx stable/nginx -f values-prod.yaml
```

#### 8. Rollback a Release

```bash
# Rollback to previous version
helm rollback my-nginx

# Rollback to specific revision
helm rollback my-nginx 2

# View release history
helm history my-nginx
```

#### 9. Uninstall a Release

```bash
helm uninstall my-nginx
```

### Creating Your First Chart

#### Initialize a New Chart

```bash
# Create a new chart structure
helm create my-chart

# The structure will be:
# my-chart/
# ├── Chart.yaml          # Chart metadata
# ├── values.yaml        # Default configuration values
# ├── charts/            # Chart dependencies
# ├── templates/         # Kubernetes resource templates
# │   ├── deployment.yaml
# │   ├── service.yaml
# │   └── ingress.yaml
# └── .helmignore        # Patterns to ignore
```

#### Customize Your Chart

Edit values.yaml to set default values:

```yaml
replicaCount: 2

image:
  repository: nginx
  pullPolicy: IfNotPresent
  tag: "1.21"

service:
  type: ClusterIP
  port: 80

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi
```

#### Package and Install Your Chart

```bash
# Package the chart
helm package my-chart

# Install your packaged chart
helm install my-release ./my-chart-0.1.0.tgz

# Or install directly from the directory
helm install my-release ./my-chart
```

### Best Practices

- Always use values files for configuration instead of --set flags
- Version your charts using semantic versioning (e.g., 1.2.3)
- Store values files in git to track changes
- Use separate values files for different environments (dev, staging, prod)
- Test your charts before deploying: helm template to preview generated manifests
- Keep secrets secure - never commit sensitive data to chart repositories

### Useful Commands

```bash
# Preview generated YAML without installing
helm template my-release ./my-chart

# Get help on any command
helm help install

# Download a chart without installing
helm pull stable/nginx

# Dry-run an installation
helm install my-nginx stable/nginx --dry-run --debug
```

### Resources

- **Official Documentation**: https://helm.sh/docs/
- **Charts Repository**: https://artifacthub.io/
- **GitHub**: https://github.com/helm/helm
- **Community**: https://kubernetes.slack.com/archives/C0CN30H61 (Helm Slack channel)

### Example Workflow

```bash
# 1. Add the official repository
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update

# 2. Search for a chart
helm search repo bitnami/postgresql

# 3. Inspect the chart
helm show values bitnami/postgresql > postgresql-values.yaml

# 4. Edit the values file
nano postgresql-values.yaml

# 5. Install the chart
helm install mydb bitnami/postgresql -f postgresql-values.yaml

# 6. Check the status
helm status mydb

# 7. When done, uninstall
helm uninstall mydb
```

### Conclusion

Helm is an essential tool for managing Kubernetes applications efficiently. It simplifies deployment, configuration, and lifecycle management of applications in Kubernetes clusters. Start with simple charts and gradually move to more complex ones as you become comfortable with Helm's templating and configuration capabilities.
